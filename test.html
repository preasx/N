<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>My Diary ðŸ’–</title>
  <style>
    body { background: #fdf6f9; font-family: Georgia, serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
    #diary-container { width: 600px; height: 400px; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); overflow: hidden; position: relative; }
    .page { display: none; width: 100%; height: 100%; }
    .page.active { display: block; }
    .page h2 { text-align: center; margin-bottom: 15px; color: #e91e63; }
    .page p { white-space: pre-line; }
    button { position: absolute; bottom: 10px; padding: 8px 15px; border: none; border-radius: 6px; background: #e91e63; color: #fff; cursor: pointer; }
    #prev { left: 10px; }
    #next { right: 10px; }
    /* themes */
    .theme-black-slow { background: #000; color: #fff; }
    .theme-white-slow { background: #fff; color: #000; }
  </style>
</head>
<body>
  <div id="diary-container">
    <button id="prev">Previous</button>
    <button id="next">Next</button>
  </div>

  <script>
    const entries = [
      { title: "Entry 1", url: "https://gist.githubusercontent.com/preasx/7240dedb381f2dc484d26c48a4376829/raw" },
      { title: "Entry 2", url: "https://gist.githubusercontent.com/preasx/bd3e2284a39a435993b0191a48bf1335/raw" }
    ];

    const LINES_PER_PAGE = 15; // can adjust later

    const container = document.getElementById("diary-container");
    let pages = [];
    let currentPage = 0;

    async function loadDiary() {
      for (let entry of entries) {
        try {
          const res = await fetch(entry.url);
          let text = await res.text();
          const lines = text.split('\n');
          let theme = 'theme-white-slow';
          if (lines[0].startsWith('theme:')) {
            theme = 'theme-' + lines[0].split(':')[1].trim();
            lines.shift(); // remove theme line
          }
          // split into pages
          for (let i = 0; i < lines.length; i += LINES_PER_PAGE) {
            const pageContent = lines.slice(i, i + LINES_PER_PAGE).join('\n');
            const pageDiv = document.createElement("div");
            pageDiv.className = `page ${theme}`;
            pageDiv.innerHTML = `<h2>${entry.title}</h2><p>${pageContent}</p>`;
            container.appendChild(pageDiv);
            pages.push(pageDiv);
          }
        } catch (err) {
          console.error("Failed to fetch gist:", entry.url, err);
        }
      }
      showPage(0);
    }

    function showPage(index) {
      pages.forEach((p, i) => p.classList.toggle('active', i === index));
      currentPage = index;
    }

    document.getElementById("next").addEventListener("click", () => {
      if (currentPage < pages.length - 1) showPage(currentPage + 1);
    });

    document.getElementById("prev").addEventListener("click", () => {
      if (currentPage > 0) showPage(currentPage - 1);
    });

    loadDiary();
  </script>
</body>
</html>